{% comment %}
  Newsletter Section - La Hime Style
  Uses Shopify's native customer form for email capture
{% endcomment %}

<section class="la-newsletter py-20 bg-gradient-to-b from-pink-50 to-purple-50">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="la-newsletter-card relative bg-white rounded-3xl p-8 md:p-16 shadow-xl border border-pink-100">
      
      {%- comment -%} Decorative Elements {%- endcomment -%}
      <div class="absolute top-6 left-6 text-pink-300 text-2xl opacity-60">★</div>
      <div class="absolute bottom-6 right-6 text-purple-300 text-2xl opacity-60">★</div>

      {%- comment -%} Header {%- endcomment -%}
      <div class="text-center mb-8">
        <h2 class="font-brand text-4xl md:text-5xl text-gray-900 mb-4">
          {{ section.settings.title }}
        </h2>
        <p class="text-gray-600 text-lg">
          {{ section.settings.description }}
        </p>
      </div>

      {%- comment -%} Newsletter Form - Using Shopify's Native Form {%- endcomment -%}
      {% form 'customer' %}
        <div class="max-w-md mx-auto space-y-4">
          
          {%- comment -%} Form Errors (if any) {%- endcomment -%}
          {% if form.errors %}
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
              <p class="text-red-700 font-medium">{{ form.errors.messages | join: ', ' }}</p>
            </div>
          {% endif %}

          {%- comment -%} Success Message {%- endcomment -%}
          {% if form.posted_successfully? %}
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
              <p class="text-green-700 font-bold">✓ Thank you for subscribing!</p>
              <p class="text-green-600 text-sm">Check your email for exclusive offers.</p>
            </div>
          {% endif %}

          {%- comment -%} Email Input {%- endcomment -%}
          <div class="relative flex items-center gap-2">
            <input
              type="email"
              name="customer[email]"
              placeholder="your@email.com"
              required
              aria-label="Email address"
              class="flex-1 px-6 py-4 rounded-full border-2 border-gray-200 focus:border-pink-500 focus:outline-none text-gray-900 placeholder:text-gray-400 transition-colors"
              {% if form.posted_successfully? %}disabled{% endif %}
            />
            <button 
              type="submit" 
              class="px-8 py-4 bg-black text-white rounded-full font-bold uppercase tracking-wider hover:bg-pink-500 transition-colors shadow-lg disabled:opacity-50"
              {% if form.posted_successfully? %}disabled{% endif %}
            >
              {{ section.settings.button_text }}
            </button>
          </div>

          {%- comment -%} Disclaimer {%- endcomment -%}
          <p class="text-xs text-gray-400 text-center">
            {{ section.settings.disclaimer }}
          </p>
        </div>
      {% endform %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Newsletter",
  "templates": ["collection", "product", "page", "index"],
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Join the Club"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Get 10% off your first order plus early access to new drops."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Subscribe"
    },
    {
      "type": "text",
      "id": "disclaimer",
      "label": "Disclaimer Text",
      "default": "We respect your privacy. Unsubscribe at any time."
    }
  ]
}
{% endschema %}

<style>
  .font-brand {
    font-family: 'Pacifico', cursive;
  }
</style>
